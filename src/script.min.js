function main(){Array.prototype.clear=function(){this.splice(0,this.length)};window.log=function(){log.history=log.history||[];log.history.push(arguments);if(this.console)console.log(Array.prototype.slice.call(arguments))};var y={title:"Social HnS",logged:false,loginFocus:false,registerFocus:false,currentPage:"",profileID:0,loadedLeft:[],loadedContent:[],loadedProfile:[],loadedRight:[],user:{},profileUser:{},newestUpdate:0,oldestUpdate:0,newerUpdates:0,moreUpdates:true,timestamp:Date.now||function(){return+new Date},timestamp_sec:parseInt(Date.now/1000)||function(){return parseInt(+new Date/1000)},stringToBoolean:function(a){switch(a.toLowerCase()){case"true":case"yes":case"1":return true;case"false":case"no":case"0":case null:return false;default:return false}},empty:function(a){var b;if(a===""||a===0||a==="0"||a===null||a===false||typeof a==='undefined')return true;if(typeof a=='object'){for(b in a)return false;return true}return false},addSlashes:function(a){return(a+'').replace(/[\\"']/g,'\\$&').replace(/\u0000/g,'\\0')},stripSlashes:function(b){return(b+'').replace(/\\(.?)/g,function(s,a){switch(a){case'\\':return'\\';case'0':return'\u0000';case'':return'';default:return a}})},setPage:function(a){y.currentPage=a},setTitle:function(a,b){if(!b){if(!a)document.title=y.title;else document.title=y.title+" | "+a}else{document.title=a}},setHash:function(a){if(!a)window.location.replace("#");else window.location.replace("#"+encodeURI(a))},getHash:function(){return decodeURIComponent(window.location.hash.substring(1))},init:function(){$.get('ajax.php',{p:"logged"},function(a){if(y.stringToBoolean(a))y.logged=true;if(!y.logged){y.loadModule('login');$.post('ajax.php',{offlineUpdate:true,hash:y.getHash()})}else y.loggedIn()})},loadModule:function(b){if(!arguments[1]||$.isFunction(arguments[1]))var c="content";else var c=arguments[1];if(b=="login"&&y.logged){y.loadedLeft.clear();y.loadedContent.clear();y.loadedProfile.clear();y.loadedRight.clear();$("#left,#content,#right,#header").empty()}switch(c){case"left":if($.inArray(b,y.loadedLeft)>-1){$("#left").show().children().hide();$("#"+b).show();return}break;case"content":if($.inArray(b,y.loadedContent)>-1){$("#content").children().hide();$("#"+b).show();var d=['profile','about','photos','friends','posts','likes'];if($.inArray(y.currentPage,d)==-1){if($("#right").is(":hidden"))y.toggleModule('right')}return}break;case"profile":if($.inArray(b,y.loadedProfile)>-1){return}break;case"right":if($.inArray(b,y.loadedRight)>-1){$("#right").show().children().hide();$("#"+b).show();return}break}$.get('ajax.php',{p:b},function(a){switch(c){case"left":y.loadedLeft.push(b);$("#left").show().children().hide();break;case"content":y.loadedContent.push(b);$("#content").children().hide();break;case"right":y.loadedRight.push(b);$("#right").show().children().hide();break}$("#"+c).append(a);if(y.currentPage=="newsfeed"){$(".loadingMostRecent,.loadingMore").hide();$(".loadMore").css('display','block')}})},toggleModule:function(a,b){if(a=="left"){if($("#left").is(":hidden")){$("#left").animate({width:200},600);$("#body").animate({left:200},600)}else{$("#left").animate({width:0},400);$("#body").animate({left:0},400)}}else if(a=="right"){if($("#right").is(":hidden")){$("#right").show();$("#content").css('width',568)}else{$("#right").hide();$("#content").css('width',778)}}},loggedIn:function(){if(y.logged){$.getJSON('ajax.php',{p:"userdata"},function(a){y.user=a;if(y.user.middlename!="")y.user.fullname=y.user.firstname+' '+y.user.middlename+' '+y.user.lastname;else y.user.fullname=y.user.firstname+' '+y.user.lastname});if(y.empty(y.getHash())){$("#content").empty();y.setPage('newsfeed');y.loadModule('home_newsfeed');y.loadModule('home_leftcol','left');y.loadModule('home_rightcol','right');y.loadModule('header','header');$("#left").animate({width:200},600);$("#right").animate({width:210},600);$("#body").animate({left:200},600,function(){$("#doc").addClass("in").removeClass("out");$('.updateNewsFeed').click()})}else{$("#content").empty();y.setPage('newsfeed');y.loadModule('home_newsfeed');y.loadModule('home_leftcol','left');y.loadModule('home_rightcol','right');y.loadModule('header','header');$("#left").animate({width:200},600);$("#right").animate({width:210},600);$("#body").animate({left:200},600,function(){$("#doc").addClass("in").removeClass("out");$('.updateNewsFeed').click()})}setInterval(function(){y.checkStreamUpdates()},30000)}},login:function(){var e=false,username=$("#lusername"),password=$("#lpassword");if($.trim(username.val())==""){username.addClass('error');e=true}else username.removeClass('error');if($.trim(password.val())==""){password.addClass('error');e=true}else password.removeClass('error');if(!e){$('#f_login input').attr('disabled',true);$.post("ajax.php",{login:true,username:$.trim(username.val()),password:secure('hns'+$.trim(password.val()))},function(a){if(y.stringToBoolean(a))y.logged=true;if(!y.logged)$('#f_login input').attr('disabled',false);else y.loggedIn()})}},logout:function(){$.post('ajax.php',{logout:true},function(){$("#left,#right").animate({width:0},400,function(){$("#left,#right").empty()});y.setPage('login');y.setTitle();y.setHash();y.loadModule('login');y.logged=false;$("#body").animate({left:0},400,function(){$("#doc").addClass("out").removeClass("in")});y.profileID=0;y.loadedLeft.clear();y.loadedContent.clear();y.loadedProfile.clear();y.loadedRight.clear();y.user={};y.profileUser={};y.newestUpdate=0;y.oldestUpdate=0;y.newerUpdates=0;y.moreUpdates=true})},regValidate:function(){var e=false,username=$("#reg_username"),password=$("#reg_password"),name=$("#reg_name"),email=$("#reg_email"),hometown=$("#reg_hometown"),city=$("#reg_city"),bmonth=$("#reg_bmonth"),bday=$("#reg_bday"),byear=$("#reg_byear"),usernameReg=/\W/,nameReg=/[A-Za-z'-]/,emailReg=/^[^0-9][a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)*[@][a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)*[.][a-zA-Z]{2,4}?$/i;if($.trim(username.val())==""){username.addClass('error');e=true}else if(usernameReg.test($.trim(username.val()))){username.addClass('error');e=true}else{y.checkUsername($.trim(username.val()));if($("#username").hasClass('error'))e=true}if($.trim(password.val())==""){password.addClass('error');e=true}else password.removeClass('error');if($.trim(name.val())==""){name.addClass('error');e=true}else if(!nameReg.test($.trim(name.val()))){name.addClass('error');e=true}else if($.trim(name.val()).split(' ').length<2){name.addClass('error');e=true}else name.removeClass('error');if($.trim(email.val())==""){email.addClass('error');e=true}else if(!emailReg.test($.trim(email.val()))){email.addClass('error');e=true}else email.removeClass('error');if($.trim(hometown.val())==""){hometown.addClass('error');e=true}else hometown.removeClass('error');if(bmonth.val()==0){bmonth.addClass('error');e=true}else bmonth.removeClass('error');if(bday.val()==0){bday.addClass('error');e=true}else bday.removeClass('error');if(byear.val()==0){byear.addClass('error');e=true}else byear.removeClass('error');if(e)return false;else return true},checkUsername:function(b){if(b!=""){$.get('ajax.php',{p:"username",username:b},function(a){if(y.stringToBoolean(a))$("#reg_username").addClass('error');else $("#reg_username").removeClass('error')})}else $("#reg_username").addClass('error')},onKeyDown:function(e){var a=e.keyCode||e.which;if(y.logged){}else{if(a==13){if(y.loginFocus)$("#b_login_splash").click();else if(y.registerFocus)$("#b_register").click()}}},handleError:function(a){return a},addNewStatusUpdate:function(a,b){var c=new Date(),hours=c.getHours(),prefix="AM",minutes=c.getMinutes(),seconds=c.getSeconds();if(hours>12){hours=hours-12;prefix="PM"}else if(hours==0)hours=12;if(minutes<10){minutes='0'+minutes}if(seconds<10){seconds='0'+seconds}var d=['January','February','March','April','May','June','July','August','September','October','November','December'];var e=['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'];var f=hours+":"+minutes+":"+seconds+" "+prefix;var g=e[c.getDay()]+", "+d[c.getMonth()]+" "+c.getDate()+", "+c.getFullYear()+" "+f;var h=hours+":"+minutes+" "+prefix;var s='<li id="update-'+a+'" style="display:none">';s+='<div class="updateWrapper"><div class="updateTitle">';s+='<a href="#" class="updateImageLink"><img class="updateImg" src="/uploads/'+y.user.username+'/images/thumb/'+y.user.default_image+'"/></a>';s+='<div class="updateNameDate"><a href="#" class="updateNameLink">'+y.user.fullname+'</a>';s+='<span class="updateDate">&nbsp;&nbsp;-&nbsp;&nbsp;<a href="#" class="updateDateLink" target="_blank" title="'+g+'">'+h+'</a></span>';s+='<span class="updateEdit">&nbsp;&nbsp;<a href="#" class="updateEditLink">Edit</a></span>';s+='</div></div>';s+='<div class="updateBody">'+y.stripSlashes(b)+'</div>';s+='<div class="updateAttachments"></div>';s+='<div class="updateActions">';s+='<ul class="streamActions">';s+='<li class="updateLinks"><a href="#" class="updateLikeLink">Like</a>&nbsp;&nbsp;-&nbsp;&nbsp;<a href="#" class="updateCommentLink">Comment</a>&nbsp;&nbsp;-&nbsp;&nbsp;<a href="#" class="updateShareLink">Share</a></li>';s+='<li class="updateLikes"></li>';s+='<li class="updateShares"></li>';s+='<li class="updateOlderComments clickable"></li>';s+='<li class="updateComments"></li>';s+='<li class="updateNewComments clickable"></li>';s+='<li class="updateComment">';s+='<div class="updateCommentBox">';s+='<form class="f_updateComment" action="#" method="post" onsubmit="return false">';s+='<div id="updateComposer"><div class="commentBox"><div class="wrap"><div class="innerWrap">';s+='<textarea class="textarea" placeholder="Add a comment..." cols="30" rows="4"></textarea>';s+='</div></div></div></div>';s+='<div class="buttonTools cf"><ul class="toolList rfloat">';s+='<li class="listItem"><label class="commentButton" for="comment"><input value="Add comment" type="submit" id="comment"/></label></li>';s+='</ul></div></form></div></li></ul></div></div></li>';return s},addStatusUpdates:function(w,x){var s="";$.each(w,function(i,v){if(x=="new"){if(i==0)y.newestUpdate=v.timestamp;if(y.oldestUpdate==0&&i==w.length-1)y.oldestUpdate=v.timestamp}else if(x=="old"){if(i==w.length-1)y.oldestUpdate=v.timestamp}var a=new Date(parseInt(v.timestamp+'000')),hours=a.getHours(),prefix="AM",minutes=a.getMinutes(),seconds=a.getSeconds();if(hours>12){hours=hours-12;prefix="PM"}else if(hours==0)hours=12;if(minutes<10){minutes='0'+minutes}if(seconds<10){seconds='0'+seconds}var b=['January','February','March','April','May','June','July','August','September','October','November','December'];var c=['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'];var d=hours+":"+minutes+":"+seconds+" "+prefix;var e=c[a.getDay()]+", "+b[a.getMonth()]+" "+a.getDate()+", "+a.getFullYear()+" "+d;var f=hours+":"+minutes+" "+prefix;if(v.default_image!="")var g="/uploads/"+v.username+"/images/thumb/"+v.default_image;else var g="i/mem/default.jpg";if(v.middlename!="")var h=v.firstname+" "+v.middlename+" "+v.lastname;else var h=v.firstname+" "+v.lastname;var j=v.likes;var k="";var l="";var m="";var n="";var o="";if(v.likes>0)o=" active";var p="";if(k!="")p=" active";var q="";if(l!="")q=" active";var r="";if(m!="")r=" active";var t="";if(n!="")t=" active";var u="";if(v.likes>0||k!=""||l!=""||m!=""||n!="")u=" active";s+='<li id="update-'+v.sid+'">';s+='<div class="updateWrapper"><div class="updateTitle">';s+='<a href="#" class="updateImageLink"><img class="updateImg" src="'+g+'"/></a>';s+='<div class="updateNameDate"><a href="#" class="updateNameLink">'+h+'</a>';s+='<span class="updateDate">&nbsp;&nbsp;-&nbsp;&nbsp;<a href="#" class="updateDateLink" target="_blank" title="'+e+'">'+f+'</a></span>';if(v.sid==y.user.user_id)s+='<span class="updateEdit">&nbsp;&nbsp;<a href="#" class="updateEditLink">Edit</a></span>';s+='</div></div>';s+='<div class="updateBody">'+y.stripSlashes(v.data)+'</div>';s+='<div class="updateAttachments"></div>';s+='<div class="updateActions">';s+='<ul class="streamActions">';s+='<li class="updateLinks"><a href="#" class="updateLikeLink">Like</a>&nbsp;&nbsp;-&nbsp;&nbsp;<a href="#" class="updateCommentLink">Comment</a>&nbsp;&nbsp;-&nbsp;&nbsp;<a href="#" class="updateShareLink">Share</a></li>';s+='<li class="updateLikes'+o+'"><a href="#" class="updateLikesLink">'+v.likes+' likes</a> by '+j+' others</li>';s+='<li class="updateShares'+p+'"><a href="#" class="updateSharesLink">'+k+' shares</a> - '+k+'</li>';s+='<li class="updateOlderComments clickable'+q+'"><a href="#" class="updateOlderCommentsLink">'+l+' older comments</a> from '+l+'</li>';s+='<li class="updateComments'+r+'"><ul class="streamComments"><li>'+m+'</li></ul></li>';s+='<li class="updateNewComments clickable'+t+'"><a href="#" class="updateNewCommentsLink">'+n+' more comments</a> from '+n+'</li>';s+='<li class="updateComment'+u+'">';s+='<div class="updateCommentBox">';s+='<form class="f_updateComment" action="#" method="post" onsubmit="return false">';s+='<div id="updateComposer"><div class="commentBox"><div class="wrap"><div class="innerWrap">';s+='<textarea class="textarea" placeholder="Add a comment..." cols="30" rows="4"></textarea>';s+='</div></div></div></div>';s+='<div class="buttonTools cf"><ul class="toolList rfloat">';s+='<li class="listItem"><label class="commentButton" for="comment"><input value="Add comment" type="submit" id="comment"/></label></li>';s+='</ul></div></form></div></li></ul></div></div></li>'});return s},addNewComment:function(a,b){var d=new Date(),hours=d.getHours(),prefix="AM",minutes=d.getMinutes(),seconds=d.getSeconds();if(hours>12){hours=hours-12;prefix="PM"}else if(hours==0)hours=12;if(minutes<10){minutes='0'+minutes}if(seconds<10){seconds='0'+seconds}var e=['January','February','March','April','May','June','July','August','September','October','November','December'];var f=['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'];var g=hours+":"+minutes+":"+seconds+" "+prefix;var h=f[d.getDay()]+", "+e[d.getMonth()]+" "+d.getDate()+", "+d.getFullYear()+" "+g;var i=hours+":"+minutes+" "+prefix;var c='<li id="comment-'+a+'">';c+='<div class="commentWrapper">';c+='<div class="commentContent">';c+='<a href="#" class="commentImageLink"><img class="commentImg" src="/uploads/'+y.user.username+'/images/thumb/'+y.user.default_image+'"/></a>';c+='<div class="commentNameBody">';c+='<a href="#" class="commentNameLink">'+y.user.fullname+'</a> - <span class="commentBody">'+b+'</span>';c+='</div>';c+='<span class="expandComment"><a href="#" class="expandCommentLink">Expand this comment &#187;</a></span>';c+='<span class="collapseComment"><a href="#" class="collapseCommentLink">Collapse this comment</a></span>';c+='<div class="commentTimeTools">';c+='<span class="commentTime" title="'+h+'">'+i+'</span></span>&nbsp;&nbsp;';c+='<span class="commentTools"><a href="#" class="commentLikeLink">Like</a></span>';c+='</div>';c+='</div>';c+='</div>';c+='</li>'},addComments:function(a,b,d,e,f){var g=new Date(b),hours=g.getHours(),prefix="AM",minutes=g.getMinutes(),seconds=g.getSeconds();if(hours>12){hours=hours-12;prefix="PM"}else if(hours==0)hours=12;if(minutes<10){minutes='0'+minutes}if(seconds<10){seconds='0'+seconds}var h=['January','February','March','April','May','June','July','August','September','October','November','December'];var i=['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'];var j=hours+":"+minutes+":"+seconds+" "+prefix;var k=i[g.getDay()]+", "+h[g.getMonth()]+" "+g.getDate()+", "+g.getFullYear()+" "+j;var l=hours+":"+minutes+" "+prefix;var c='<li id="comment-'+a+'">';c+='<div class="commentWrapper">';c+='<div class="commentContent">';c+='<a href="#" class="commentImageLink"><img class="commentImg" src="/uploads/Andrew/images/thumb/IMG_1271.JPG"/></a>';c+='<div class="commentNameBody">';c+='<a href="#" class="commentNameLink">Phillip Tunstall</a> - <span class="commentBody">Watch "Ghost in the Shell" to be better prepared...</span>';c+='</div>';c+='<span class="expandComment"><a href="#" class="expandCommentLink">Expand this comment &#187;</a></span>';c+='<span class="collapseComment"><a href="#" class="collapseCommentLink">Collapse this comment</a></span>';c+='<div class="commentTimeTools">';c+='<span class="commentTime" title="Jul 28, 2011 9:13:25 AM">9:13 AM</span></span>&nbsp;&nbsp;';c+='<span class="commentTools"><a href="#" class="commentLikeLink">Like</a></span>';c+='</div>';c+='</div>';c+='</div>';c+='</li>'},bbCode:function(a){return true},checkStreamUpdates:function(){$.getJSON('ajax.php',{p:"stream",newest:y.newestUpdate,hash:y.getHash()},function(a){if(a!="0"){var b=a["data"].length;y.newerUpdates=b;$(".mostRecentCount").find(".mostRecentCountValue").html(b).end().show();$("ul.sideNav #newsFeedLink .sideNavCount").find(".countValue").html(b).end().show()}})}};$(document.documentElement).keydown(y.onKeyDown);$(document).ready(function(){y.init();$(".homeLink").live('click',function(){if(y.logged){if(y.currentPage!="newsfeed"){y.setPage('newsfeed');y.setTitle();y.setHash();y.loadModule('home_newsfeed');y.loadModule('home_leftcol','left');y.loadModule('home_rightcol','right');$("#newsFeedLink").click()}}else{y.setPage('login');y.setTitle();y.setHash();y.loadModule('login')}});$("#lusername, #lpassword").live('focus',function(){y.loginFocus=true}).live('blur',function(){y.loginFocus=false});$("#b_login_splash").live('click',function(){y.login()});$("#b_register_splash").live('click',function(){y.loadModule('register');y.setTitle('Register');y.setHash('register')});$("#reg_username, #reg_password, #reg_name, #reg_email, #reg_hometown, #reg_city").live('focus',function(){y.registerFocus=true}).live('blur',function(){y.registerFocus=false});$("#reg_username").live('blur',function(){y.checkUsername($.trim(this.value))});$("#b_register").live('click',function(){if(!y.regValidate())return;$('#f_register input,#f_register select').attr('disabled',true);$.post("ajax.php",{register:true,username:$.trim($("#username").val()),password:$.trim($("#password").val()),name:$.trim($("#name").val()),email:$.trim($("#email").val()),hometown:$.trim($("#hometown").val()),city:$.trim($("#city").val()),gender:$.trim($("#gender").val()),bmonth:$("#bmonth").val(),bday:$("#bday").val(),byear:$("#byear").val()},function(){alert("registered")})});$("#b_login").live('click',function(){y.setPage('login');y.setTitle();y.setHash();y.loadModule('login')});$("#headerLogoutLink").live('click',function(){y.logout()});$(".welcome_image,.welcome_name,.profileLink").live('click',function(){if(y.currentPage!="profile"){y.setPage('profile');y.setTitle(y.user.fullname,true);y.setHash('profile');y.toggleModule('right');y.loadModule('profile');y.loadModule('profile_leftcol','left');$("#wallLink").click()}});$(".welcome_editlink").live('click',function(){if(y.currentPage!="edit"){y.setPage('edit');y.loadModule('edit')}});$(".sideNavItem").live('click',function(){if(!$(this).hasClass('selectedItem')){$(".sideNav").children().removeClass("selectedItem");$(this).addClass("selectedItem")}});$("#newsFeedLink").live('click',function(){if(y.currentPage!="newsfeed"){y.setPage('newsfeed');y.loadModule('home_newsfeed')}});$("#messagesLink").live('click',function(){if(y.currentPage!="messages"){y.setPage('messages');y.loadModule('messages')}});$("#friendsLink").live('click',function(){if(y.currentPage!="profile"){y.setPage('profile');y.setTitle(y.user.fullname,true);y.setHash('profile');y.toggleModule('right');y.loadModule('profile');y.loadModule('profile_leftcol','left');$("#friendsLink").click()}});$("#wallLink").live('click',function(){if(y.currentPage!="profile"){y.setPage('profile');y.loadModule('profile')}});$("#infoLink").live('click',function(){if(y.currentPage!="about"){y.setPage('about');y.loadModule('about')}});$("#photosLink").live('click',function(){if(y.currentPage!="photos"){y.setPage('photos');y.loadModule('photos')}});$(".updateStatus .textarea").live('focus',function(){$(this).css('max-height',400);$(".updateStatus .buttonTools").show()}).live('blur',function(){if($(this).val()==""){$(this).css('max-height',16);$(".updateStatus .buttonTools").hide()}});$("#share").live('click',function(){if($.trim($(".updateStatus .textarea").val()).length>0){$.post("ajax.php",{p:"status",data:$.trim($(".updateStatus .textarea").val())},function(a){if(a!="0"){a=$.parseJSON(a);if(y.newerUpdates>0)$(".updateNewsFeed").click();else y.newestUpdate=y.timestamp_sec;var s=y.addNewStatusUpdate(a["data"].insertid,a["data"].status);$(".updateStatus .textarea").val('').blur();$("ul#stream").prepend(s).find("li.active").prev().addClass("borderActive").end().end().find("li:first").fadeIn()}})}});$("ul#stream > li").live('click',function(){$("ul#stream > li").removeClass('active borderActive');$(this).addClass('active').prev().addClass('borderActive')$(this).next().addClass('borderActive')});$(".updateComment .textarea").live('focus',function(){$(this).css('max-height',300);$(".updateComment .buttonTools").show()}).live('blur',function(){if($(this).val()==""){$(this).css('max-height',16);$(".updateComment .buttonTools").hide()}});$("#comment").live('click',function(){if($.trim($(".updateComment .textarea").val()).length>0){$.post("ajax.php",{p:"comment",data:$.trim($(".updateComment .textarea").val())},function(a){if(a!="0"){var c=y.addNewComment(a,$.trim($(".updateComment .textarea").val()));$(".updateComment .textarea").val('').blur();alert($(this).closest("ul#streamActions").children("ul#streamComments").html());$(this).closest("ul#streamActions").children("ul#streamComments").append(c);$(this).parents().find("ul#streamActions").children().find("ul#streamComments li:last").fadeIn()}})}});$(".updateNewsFeed").live('click',function(){$(".mostRecentCount").hide().find(".mostRecentCountValue").empty();$("ul.sideNav #newsFeedLink .sideNavCount").hide().find(".countValue").empty();y.newerUpdates=0;$(".loadingMostRecent").css('display','block');$.getJSON('ajax.php',{p:"stream",newest:y.newestUpdate},function(a){if(a!="0"){var s=y.addStatusUpdates(a["data"],"new");$("ul#stream").prepend(s).find("li.active").prev().addClass("borderActive")}$(".loadingMostRecent").hide()})});$(".loadMore").live('click',function(){if(y.newestUpdate==0)return;$(this).hide();$(".loadingMore").css('display','block');$.getJSON('ajax.php',{p:"stream",oldest:y.oldestUpdate},function(a){if(a!="0"){var s=y.addStatusUpdates(a["data"],"old");$("ul#stream").append(s).find("li.active").next().addClass("borderActive");if(a["data"].length<30){$("ul#stream").append('<div class="moreUpdates">No More Updates Available!</div>');y.moreUpdates=false;$(".loadMoreLink").hide()}}else{if(y.moreUpdates&&y.newestUpdate>0){$("ul#stream").append('<div class="moreUpdates">No More Updates Available!</div>');y.moreUpdates=false;$(".loadMoreLink").hide()}}$(".loadingMore").hide();$(".loadMore").show()})})});function encode(a){if(a===null||typeof a==="undefined"){return""}var b=(a+'');var c="",start,end,stringl=0;start=end=0;stringl=b.length;for(var n=0;n<stringl;n++){var d=b.charCodeAt(n);var e=null;if(d<128){end++}else if(d>127&&d<2048){e=String.fromCharCode((d>>6)|192)+String.fromCharCode((d&63)|128)}else{e=String.fromCharCode((d>>12)|224)+String.fromCharCode(((d>>6)&63)|128)+String.fromCharCode((d&63)|128)}if(e!==null){if(end>start){c+=b.slice(start,end)}c+=e;start=end=n+1}}if(end>start){c+=b.slice(start,stringl)}return c}function secure(a){var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var c,o2,o3,h1,h2,h3,h4,bits,i=0,ac=0,enc="",tmp_arr=[];if(!a){return a}a=encode(a+'');do{c=a.charCodeAt(i++);o2=a.charCodeAt(i++);o3=a.charCodeAt(i++);bits=c<<16|o2<<8|o3;h1=bits>>18&0x3f;h2=bits>>12&0x3f;h3=bits>>6&0x3f;h4=bits&0x3f;tmp_arr[ac++]=b.charAt(h1)+b.charAt(h2)+b.charAt(h3)+b.charAt(h4)}while(i<a.length);enc=tmp_arr.join('');switch(a.length%3){case 1:enc=enc.slice(0,-2)+'==';break;case 2:enc=enc.slice(0,-1)+'=';break}return enc}return true}window.$&&main()||(function(){var a=document.createElement("script");a.setAttribute("type","text/javascript");a.setAttribute("src","jquery.js");a.onload=main;a.onreadystatechange=function(){if(this.readyState=="complete"||this.readyState=="loaded")main()};(document.getElementsByTagName("head")[0]||document.documentElement).appendChild(a)})();